---
language: python
sudo: false
python:
  - 2.7
  - 3.5
before_install:
  # Make sure everything's up to date.
  - sudo apt-get update -qq
install: pip install -r requirements.txt
script:
  - yamllint -s $(git ls-files | grep -E '*.ya?ml$')
  - ansible-lint playbook.yml
  - ansible-galaxy install -r requirements.yml
  - ansible-playbook -i ci_hosts playbook.yml --syntax-check
  - ansible-playbook -i ci_hosts playbook.yml --connection=local --sudo
